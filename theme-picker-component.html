<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ANTIGRAVITY THEME PICKER - Floating UI Component
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     
     INSTALLATION:
     Add this snippet anywhere in your <header> or <nav> section
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- Theme Picker Container -->
<div class="theme-picker-wrapper">
    <button class="theme-picker-toggle" aria-label="Change Theme" title="Change Theme">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path
                d="M12 1v6m0 6v6m9.66-9.66l-4.24 4.24m-6.84 0l-4.24-4.24M23 12h-6m-6 0H1m20.66 9.66l-4.24-4.24m-6.84 0l-4.24 4.24">
            </path>
        </svg>
    </button>

    <div class="theme-picker-dropdown">
        <div class="theme-picker-header">
            <h4>Choose Theme</h4>
        </div>
        <div class="theme-picker-grid" id="theme-picker-grid">
            <!-- Themes will be populated by JavaScript -->
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THEME PICKER STYLES
     Add to your main CSS or keep inline for portability
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
    /* Theme Picker - Floating System */
    .theme-picker-wrapper {
        position: relative;
        z-index: 1001;
    }

    .theme-picker-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: var(--bg-elevated);
        border: 1px solid var(--border-medium);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: var(--text-main);
        box-shadow: var(--shadow-soft);
    }

    .theme-picker-toggle:hover {
        background: var(--hover-overlay);
        border-color: var(--accent-primary);
        box-shadow: var(--shadow-medium);
        transform: translateY(-2px);
    }

    .theme-picker-toggle svg {
        animation: rotate-gentle 8s linear infinite;
    }

    @keyframes rotate-gentle {
        from {
            transform: rotate(0deg);
        }

        to {
            transform: rotate(360deg);
        }
    }

    .theme-picker-dropdown {
        position: absolute;
        top: calc(100% + 10px);
        right: 0;
        width: 320px;
        max-width: 90vw;
        background: var(--bg-elevated);
        border: 1px solid var(--border-medium);
        border-radius: 16px;
        box-shadow: var(--shadow-floating);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(20px);
        z-index: 1002;
    }

    .theme-picker-wrapper.active .theme-picker-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .theme-picker-header {
        padding: 16px 20px;
        border-bottom: 1px solid var(--border-subtle);
    }

    .theme-picker-header h4 {
        margin: 0;
        font-size: 0.95rem;
        font-weight: 600;
        color: var(--text-main);
    }

    .theme-picker-grid {
        padding: 16px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 10px;
        max-height: 400px;
        overflow-y: auto;
    }

    /* Custom Scrollbar for Picker */
    .theme-picker-grid::-webkit-scrollbar {
        width: 6px;
    }

    .theme-picker-grid::-webkit-scrollbar-track {
        background: transparent;
    }

    .theme-picker-grid::-webkit-scrollbar-thumb {
        background: var(--accent-primary);
        border-radius: 3px;
    }

    .theme-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        padding: 10px 8px;
        background: var(--bg-secondary);
        border: 2px solid var(--border-subtle);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }

    .theme-option:hover {
        border-color: var(--accent-primary);
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
    }

    .theme-option.active {
        border-color: var(--accent-primary);
        background: var(--hover-overlay);
        box-shadow: var(--shadow-medium);
    }

    .theme-option.active::before {
        content: 'âœ“';
        position: absolute;
        top: 4px;
        right: 4px;
        width: 18px;
        height: 18px;
        background: var(--accent-primary);
        color: var(--text-inverse);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: bold;
    }

    .theme-color-swatch {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        border: 2px solid var(--border-subtle);
        box-shadow: var(--shadow-soft);
        transition: transform 0.2s;
    }

    .theme-option:hover .theme-color-swatch {
        transform: scale(1.1);
    }

    .theme-name {
        font-size: 0.75rem;
        color: var(--text-muted);
        font-weight: 500;
        line-height: 1.2;
    }

    /* Mobile Responsive */
    @media (max-width: 480px) {
        .theme-picker-dropdown {
            width: 280px;
        }

        .theme-picker-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }
</style>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THEME PICKER LOGIC
     Connects to AntigravityThemes API
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
    (function () {
        'use strict';

        // Wait for theme manager to be available
        const initThemePicker = () => {
            if (!window.AntigravityThemes) {
                setTimeout(initThemePicker, 100);
                return;
            }

            const wrapper = document.querySelector('.theme-picker-wrapper');
            const toggle = document.querySelector('.theme-picker-toggle');
            const grid = document.getElementById('theme-picker-grid');

            if (!wrapper || !toggle || !grid) return;

            // Populate theme options
            const themes = AntigravityThemes.getAllThemes();
            themes.forEach(theme => {
                const option = document.createElement('div');
                option.className = 'theme-option';
                option.setAttribute('data-theme-id', theme.id);
                option.style.position = 'relative';

                option.innerHTML = `
                <div class="theme-color-swatch" style="background: ${theme.color};"></div>
                <span class="theme-name">${theme.name}</span>
            `;

                option.addEventListener('click', () => {
                    AntigravityThemes.applyTheme(theme.id);
                    updateActiveState();
                    wrapper.classList.remove('active');
                });

                grid.appendChild(option);
            });

            // Toggle dropdown
            toggle.addEventListener('click', (e) => {
                e.stopPropagation();
                wrapper.classList.toggle('active');
            });

            // Close on outside click
            document.addEventListener('click', (e) => {
                if (!wrapper.contains(e.target)) {
                    wrapper.classList.remove('active');
                }
            });

            // Update active state
            function updateActiveState() {
                const current = AntigravityThemes.getCurrentTheme();
                document.querySelectorAll('.theme-option').forEach(opt => {
                    opt.classList.toggle('active', opt.dataset.themeId === current);
                });
            }

            // Listen for theme changes
            window.addEventListener('themechange', updateActiveState);

            // Initial state
            updateActiveState();

            console.log('ðŸŽ¨ Theme Picker UI initialized');
        };

        // Auto-init when ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initThemePicker);
        } else {
            initThemePicker();
        }
    })();
</script>